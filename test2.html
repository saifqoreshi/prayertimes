<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ramadan Prayer Calendar</title>
  <style>
    body { background: #0b0f14; color: #e6edf3; font-family: system-ui, sans-serif; padding: 16px; }
    .controls { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:16px; align-items:center; }
    select, button { padding:8px 12px; border-radius:8px; border:1px solid #233044; background:#111722; color:#e6edf3; cursor:pointer; }
    table { width:100%; border-collapse: collapse; margin-top:16px; }
    th, td { padding:8px; border:1px solid #233044; text-align:center; font-size:0.9rem; }
    th { background:#0f1623; color:#9fb0c0; }
    tr.today { background: rgba(58,163,255,0.25); font-weight:bold; }
    .legend { margin-top:8px; font-size:0.85rem; color:#9fb0c0; text-align:center; }
    .error { color:#ff788a; margin-top:16px; }
    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr { display: block; }
      th { display: none; }
      td { display: flex; justify-content: space-between; padding: 6px 8px; }
      td::before { content: attr(data-label); font-weight: 600; }
    }
  </style>
</head>
<body>
  <h1>Ramadan Prayer Calendar</h1>

  <div class="controls">
    <label>
      City:
      <select id="citySelect">
        <option value="Gosheim, Germany">Gosheim, Germany</option>
        <option value="Urbach, Germany">Urbach, Germany</option>
      </select>
    </label>

    <label>
      Year:
      <select id="yearSelect">
        <option value="2026">2026</option>
        <option value="2027">2027</option>
        <option value="2028">2028</option>
        <option value="2029">2029</option>
        <option value="2030">2030</option>
      </select>
    </label>

    <button id="loadBtn">Load Calendar</button>
  </div>

  <div id="error" class="error"></div>
  <div id="loading">Select city and year, then click “Load Calendar”.</div>

  <table id="ramadanTable" style="display:none">
    <thead>
      <tr><th>Date (Gregorian)</th><th>Fajr</th><th>Dhuhr</th><th>Asr</th><th>Maghrib</th><th>Isha</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="legend">Times are in 24‑hour format (as returned by AlAdhan) — local timezone</div>

<script>
  async function loadRamadanCalendar(cityCountry, year) {
    const [city, country] = cityCountry.split(",").map(s=>s.trim());
    const url = \`https://aladhan.com/ramadan-prayer-times/\${year}/\${encodeURIComponent(city)}/\${encodeURIComponent(country)}\`;
    document.getElementById("error").textContent = "";
    document.getElementById("loading").textContent = "Loading…";
    document.getElementById("ramadanTable").style.display = "none";
    const tbody = document.querySelector("#ramadanTable tbody");
    tbody.innerHTML = "";
    try {
      const resp = await fetch(url);
      if (!resp.ok) throw new Error("API responded with " + resp.status);
      const data = await resp.json();
      const days = data.data;
      if (!Array.isArray(days) || days.length === 0) {
        throw new Error("Empty calendar data");
      }
      const today = new Date();
      days.forEach(day => {
        const gr = day.date.gregorian;
        const row = document.createElement("tr");
        if (parseInt(gr.day) === today.getDate() &&
            parseInt(gr.month.number) === (today.getMonth()+1) &&
            parseInt(gr.year) === today.getFullYear()) {
          row.classList.add("today");
        }
        const times = day.timings;
        const cells = [
          \`\${gr.day}-\${gr.month.number}-\${gr.year}\`,
          times.Fajr.split(" ")[0],
          times.Dhuhr.split(" ")[0],
          times.Asr.split(" ")[0],
          times.Maghrib.split(" ")[0],
          times.Isha.split(" ")[0]
        ];
        cells.forEach(c => {
          const td = document.createElement("td");
          td.textContent = c;
          row.appendChild(td);
        });
        tbody.appendChild(row);
      });
      document.getElementById("loading").textContent = "";
      document.getElementById("ramadanTable").style.display = "table";
    } catch (e) {
      document.getElementById("loading").textContent = "";
      document.getElementById("error").textContent = "Could not load Ramadan calendar: " + e.message;
    }
  }

  document.getElementById("loadBtn").addEventListener("click", () => {
    const cityCountry = document.getElementById("citySelect").value;
    const year = document.getElementById("yearSelect").value;
    loadRamadanCalendar(cityCountry, year);
  });

  // default on load
  window.addEventListener("load", () => {
    document.getElementById("citySelect").value = "Gosheim, Germany";
    document.getElementById("yearSelect").value = "2026";
  });
</script>
</body>
</html>