<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hijri Calendar</title>
<style>
  body { margin:0; font-family: system-ui, sans-serif; background:#0b0f14; color:#e6edf3; padding:16px; }
  header { text-align:center; margin-bottom:12px; }
  h1 { margin:0; font-size:1.2rem; }
  .controls { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin-bottom:12px; }
  select, button { padding:8px 12px; border-radius:8px; border:1px solid #233044; background:#111722; color:#e6edf3; cursor:pointer; }
  table { width:100%; border-collapse: collapse; margin-top:12px; }
  th, td { padding:8px; border:1px solid #233044; text-align:center; font-size:0.9rem; }
  th { background:#0f1623; color:#9fb0c0; }
  tr.today { background: rgba(58,163,255,0.25); font-weight:bold; }
  .legend { font-size:0.85rem; color:#9fb0c0; margin-top:6px; text-align:center; }
  #error { color:#ff788a; text-align:center; margin-top:12px; }
  @media (max-width:600px) {
    table, thead, tbody, th, td, tr { display:block; }
    th { display:none; }
    td { display:flex; justify-content:space-between; padding:6px 8px; }
    td::before { content: attr(data-label); font-weight:600; }
  }
</style>
</head>
<body>

<header>
  <h1>Hijri Calendar</h1>
</header>

<div class="controls">
  <label>
    Month:
    <select id="monthSelect"></select>
  </label>
  <label>
    Year:
    <select id="yearSelect"></select>
  </label>
  <button id="loadBtn">Load Calendar</button>
</div>

<table id="calendarTable">
  <thead>
    <tr>
      <th>Hijri Date</th>
      <th>Gregorian Date</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="legend">Dates are shown in Hijri and corresponding Gregorian calendar</div>
<div id="error"></div>

<script>
// Populate Hijri month names
const hijriMonths = ["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'ban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"];
const monthSelect = document.getElementById("monthSelect");
hijriMonths.forEach((m,i)=>{ const opt=document.createElement("option"); opt.value=i+1; opt.textContent=m; monthSelect.appendChild(opt); });

// Populate Hijri years (2026–2030 as example)
const yearSelect = document.getElementById("yearSelect");
for(let y=1447;y<=1451;y++){ // approximate Hijri years for 2026–2030
  const opt=document.createElement("option"); opt.value=y; opt.textContent=y; yearSelect.appendChild(opt);
}

// Utility to pad numbers
const pad=n=>String(n).padStart(2,"0");

// Load Hijri calendar
async function loadHijriCalendar(){
  const month = monthSelect.value;
  const year = yearSelect.value;
  const tbody = document.querySelector("#calendarTable tbody");
  tbody.innerHTML = "";
  document.getElementById("error").textContent="";
  
  try{
    // Use API to get Hijri → Gregorian conversion
    for(let day=1; day<=30; day++){
      const r = await fetch(`https://api.aladhan.com/v1/hToG?date=${pad(day)}-${pad(month)}-${year}`);
      if(!r.ok) break; // no more days
      const data = await r.json();
      const g = data.data.gregorian.date; // DD-MM-YYYY
      if(!g) break;
      
      const tr = document.createElement("tr");
      const tdHijri = document.createElement("td"); tdHijri.textContent = `${day} ${hijriMonths[month-1]} ${year}`; tdHijri.setAttribute("data-label","Hijri Date");
      const tdGreg = document.createElement("td"); tdGreg.textContent = g; tdGreg.setAttribute("data-label","Gregorian Date");
      
      // Highlight today if matches
      const today = new Date();
      const [dd,mm,yyyy] = g.split("-").map(Number);
      if(dd===today.getDate() && mm===today.getMonth()+1 && yyyy===today.getFullYear()) tr.classList.add("today");
      
      tr.appendChild(tdHijri); tr.appendChild(tdGreg);
      tbody.appendChild(tr);
    }
  }catch(e){
    document.getElementById("error").textContent="Error loading calendar: "+e.message;
  }
}

// Default selection
monthSelect.value = new Date().getMonth()+1;
yearSelect.value = 1447;

// Button click
document.getElementById("loadBtn").addEventListener("click",loadHijriCalendar);

// Load on page load
window.addEventListener("load",loadHijriCalendar);
</script>

</body>
</html>