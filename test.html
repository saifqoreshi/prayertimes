<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prayer Times – Gosheim, Germany</title>
  <meta name="theme-color" content="#0b0f14" />
  <style>
    :root {
      --bg:#0b0f14; --card:#111722; --text:#e6edf3; --muted:#9fb0c0;
      --accent:#3aa3ff; --accent2:#25c2a0; --border:#233044; --radius:12px;
      --shadow:0 6px 18px rgba(0,0,0,0.35);
    }
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .app{max-width:740px;margin:0 auto;padding:12px 16px 24px}
    header{background:var(--card);border-bottom:1px solid var(--border);box-shadow:var(--shadow);padding:10px;text-align:left}
    header h1{margin:0;font-size:1rem}
    header .sub{margin-top:4px;font-size:0.9rem;color:var(--muted)}
    .date-nav{text-align:center;margin:12px 0}
    .date-nav input[type="date"]{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px;font-size:0.9rem}
    .next-row{display:flex;justify-content:space-between;align-items:center;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:10px;margin-bottom:12px;box-shadow:var(--shadow)}
    .next-row .label{font-size:0.85rem;color:var(--muted)}
    .next-row .value{font-size:1rem;font-weight:600}
    table{width:100%;border-collapse:collapse;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:14px}
    th,td{padding:10px;border-bottom:1px solid var(--border);text-align:center;font-size:0.88rem}
    th{color:var(--muted);background:#0f1623}
    tr:last-child td{border-bottom:none}
    .row.current td:nth-child(2){color:var(--accent);font-weight:700;background:rgba(58,163,255,0.12)}
    .row.next td:nth-child(2){color:var(--accent2);font-weight:700;background:rgba(37,194,160,0.12)}
    .indicator{display:block;font-size:0.72rem;margin-top:4px}
    .ramadan-widget{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:12px;margin-top:14px;text-align:center;box-shadow:var(--shadow)}
    .ramadan-widget strong{color:var(--accent2)}
    .ramadan-widget .sub{color:var(--muted);font-size:0.9rem}
    .calendar-toggle{text-align:center;margin:12px 0}
    .calendar-toggle button,
    .audio-controls button{
      background:var(--card);
      color:var(--text);
      border:2px solid var(--accent);
      border-radius:var(--radius);
      padding:8px 14px;
      cursor:pointer;
      font-size:0.9rem;
      font-weight:600;
      box-shadow:var(--shadow);
      transition:background 0.25s,color 0.25s,border-color 0.25s;
      margin:4px;
    }
    .calendar-toggle button:hover,
    .audio-controls button:hover{background:var(--accent);color:#fff;border-color:var(--accent2)}
    .calendar-container{display:none;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:12px;margin-top:16px;box-shadow:var(--shadow);max-height:360px;overflow-y:auto}
    .calendar-container h2{font-size:0.95rem;margin:0 0 8px;color:var(--accent);text-align:center}
    .calendar-table{width:100%;border-collapse:collapse}
    .calendar-table th,.calendar-table td{padding:8px;border-bottom:1px solid var(--border);font-size:0.82rem;text-align:center}
    .calendar-table th{color:var(--muted);background:#0f1623}
    .calendar-table tr:last-child td{border-bottom:none}
    .cal-today{background:rgba(58,163,255,0.12)}
    footer{text-align:center;margin-top:16px;padding-bottom:8px}
    footer .powered{font-size:0.7rem;color:var(--muted)}
    footer .meta{font-size:0.6rem;color:#6b7890;margin-top:4px}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Prayer times for Gosheim, Germany</h1>
      <div class="sub" id="gregorian">—</div>
      <div class="sub" id="hijri">—</div>
    </header>

    <div class="date-nav">
      <input type="date" id="dateInput" />
    </div>

    <div class="next-row" aria-live="polite">
      <div><span class="label">Next prayer</span><div class="value" id="nextName">—</div></div>
      <div><span class="label">Countdown</span><div class="value" id="countdown">—</div></div>
    </div>

    <table aria-label="Prayer times">
      <thead><tr><th>Prayer</th><th>Time & Status</th></tr></thead>
      <tbody id="tableBody"></tbody>
    </table>

    <div class="ramadan-widget" aria-live="polite">
      <div><strong>Days until Ramadan:</strong> <span id="ramadanCountdown">—</span></div>
      <div class="sub" id="ramadanDate">—</div>
    </div>

    <div class="calendar-toggle">
      <button id="toggleCalendar">Show Monthly Calendar</button>
    </div>
    <div class="calendar-container" id="calendarContainer">
      <h2>Monthly Prayer Calendar</h2>
      <table class="calendar-table" id="calendarTable">
        <thead>
          <tr><th>Date</th><th>Fajr</th><th>Dhuhr</th><th>Asr</th><th>Maghrib</th><th>Isha</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="audio-controls">
      <button id="muteBtn">Mute Adhan</button>
      <button id="testBtn">Test Adhan</button>
    </div>
    <audio id="adhanAudio" src="https://cdn.islamic.network/adhan/mp3/adhan.mp3" preload="auto"></audio>

    <footer>
      <div class="powered">Powered by AlAdhan API</div>
      <div class="meta" id="meta">Method: Muslim World League • School: Hanafi</div>
    </footer>
  </div>

  <script>
    const el={
      adhanAudio:document.getElementById("adhanAudio"),
      muteBtn:document.getElementById("muteBtn"),
      testBtn:document.getElementById("testBtn"),
      toggleBtn:document.getElementById("toggleCalendar"),
      calContainer:document.getElementById("calendarContainer"),
    };

    let adhanMuted=false;
    el.muteBtn.addEventListener("click",()=>{
      adhanMuted=!adhanMuted;
      el.muteBtn.textContent=adhanMuted?"Unmute Adhan":"Mute Adhan";
      el.adhanAudio.muted=adhanMuted;
    });

    // Test Adhan button
    el.testBtn.addEventListener("click",()=>{
      if(!adhanMuted){
        el.adhanAudio.currentTime=0;
        el.adhanAudio.play().catch(err=>console.warn("Playback blocked:",err));
      }
    });

    // Toggle calendar
    el.toggleBtn.addEventListener("click",()=>{
      const show=el.calContainer.style.display!=="block";
      el.calContainer.style.display=show?"block":"none";
      el.toggleBtn.textContent=show?"Hide Monthly Calendar":"Show Monthly Calendar";
    });
  </script>
</body>
</html>
