<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Prayer Times – Gosheim, Germany</title>
<style>
:root {
  --bg: #000000;
  --card: #111111;
  --text: #e6edf3;
  --muted: #777777;
  --accent: #3aa3ff;
  --accent2: #25c2a0;
  --border: #222222;
  --radius: 10px;
  --shadow: 0 4px 12px rgba(0,0,0,0.5);
}
* { box-sizing: border-box; margin:0; padding:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
body { background: var(--bg); color: var(--text); line-height: 1.4; }

.app { max-width: 700px; margin: 0 auto; padding: 12px 16px; }

header { position: sticky; top:0; background: var(--card); padding: 12px; border-bottom: 1px solid var(--border); box-shadow: var(--shadow); z-index: 2; text-align:center; border-radius: var(--radius) var(--radius) 0 0; }
header h1 { font-size: 1rem; margin-bottom: 4px; }
header .sub { font-size: 0.85rem; color: var(--muted); }

.error { display: none; color: #ff788a; background: rgba(255,77,109,0.12); border: 1px solid #ff4d6d; border-radius: var(--radius); padding: 8px; margin: 10px 0; text-align: center; font-size: 0.85rem; }

.date-nav { display: flex; justify-content: center; align-items: center; gap: 6px; margin: 10px 0; flex-wrap: wrap; }
.date-nav button, .date-nav input { background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: var(--radius); padding: 6px 10px; cursor: pointer; font-size: 0.9rem; }

.next-row { display: flex; justify-content: space-between; align-items: center; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 10px; margin-bottom: 12px; box-shadow: var(--shadow); }
.next-row .next-prayer { font-weight: 600; }
.next-row .countdown { font-weight: 600; text-align: right; }
.next-row .label { font-size: 0.8rem; color: var(--muted); }

table { width: 100%; border-collapse: collapse; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 12px; }
th, td { padding: 8px; text-align: center; font-size: 0.85rem; border-bottom: 1px solid var(--border); }
th { color: var(--muted); background: #111111; }
tr:last-child td { border-bottom: none; }

.row.current td.status { color: var(--accent); font-weight: 700; }
.row.next td.status { color: var(--accent2); font-weight: 700; }
.indicator { font-size: 0.72rem; color: var(--muted); display:block; margin-top:2px; }

.ramadan-widget { background: var(--card); border:1px solid var(--border); border-radius: var(--radius); padding:10px; margin-top: 12px; text-align:center; box-shadow: var(--shadow); font-size:0.85rem; }
.ramadan-widget strong { color: var(--accent2); }
.ramadan-widget .sub { color: var(--muted); font-size:0.8rem; }

.calendar-toggle { text-align:center; margin:12px 0; }
.calendar-toggle button { background: var(--card); color: var(--text); border:2px solid var(--accent); border-radius: var(--radius); padding:8px 16px; cursor:pointer; font-size:0.9rem; font-weight:600; box-shadow: var(--shadow); transition:0.25s; }
.calendar-toggle button:hover { background: var(--accent); color:#000; border-color: var(--accent2); }

.calendar-container { display:none; background: var(--card); border:1px solid var(--border); border-radius: var(--radius); padding:10px; margin-top:10px; box-shadow: var(--shadow); max-height:400px; overflow:auto; font-size:0.85rem; }
.calendar-controls { display:flex; justify-content:center; gap:5px; margin-bottom:6px; flex-wrap:wrap; }
.calendar-controls select, .calendar-controls button { padding:5px 8px; border-radius: var(--radius); border:1px solid var(--border); background: var(--card); color: var(--text); cursor:pointer; font-size:0.8rem; }

.calendar-table { width:100%; border-collapse: collapse; }
.calendar-table th, .calendar-table td { padding:6px; border-bottom:1px solid var(--border); font-size:0.8rem; text-align:center; }
.calendar-table th { color: var(--muted); background:#111111; }
.tr.cal-today td { font-weight:700; background: rgba(58,163,255,0.12); }
.calendar-legend { font-size:0.72rem; color: var(--muted); text-align:center; margin-top:4px; }

footer { text-align:center; margin-top:12px; padding-bottom:6px; font-size:0.75rem; color: var(--muted); }
@media(max-width:420px){ th, td{font-size:0.78rem; padding:6px;} }
</style>
</head>
<body>
<div class="app">
<header>
  <h1>Prayer times for Gosheim, Germany</h1>
  <div class="sub" id="gregorian">—</div>
  <div class="sub" id="hijri">—</div>
</header>

<div id="error" class="error" role="alert"></div>

<div class="date-nav" aria-label="Datum Navigation">
  <button id="prevDay" aria-label="Vorheriger Tag">&lt;</button>
  <input type="date" id="dateInput" aria-label="Datum auswählen" />
  <button id="nextDay" aria-label="Nächster Tag">&gt;</button>
</div>

<div class="next-row" aria-live="polite">
  <div>
    <span class="label">Next prayer</span>
    <div class="next-prayer" id="nextName">—</div>
  </div>
  <div>
    <span class="label">Countdown</span>
    <div class="countdown" id="countdown">—</div>
  </div>
</div>

<table aria-label="Prayer times">
  <thead>
    <tr><th>Prayer</th><th>Status</th><th>Time</th></tr>
  </thead>
  <tbody id="tableBody"></tbody>
</table>

<div class="ramadan-widget" aria-live="polite">
  <div><strong>Days until Ramadan:</strong> <span id="ramadanCountdown">—</span></div>
  <div class="sub" id="ramadanDate">—</div>
</div>

<div class="calendar-toggle">
  <button id="toggleCalendar">Show Monthly Calendar</button>
</div>

<div class="calendar-container" id="calendarContainer">
  <div class="calendar-controls">
    <select id="monthSelect" aria-label="Monat wählen"></select>
    <select id="yearSelect" aria-label="Jahr wählen"></select>
    <button id="loadCalendar">Load</button>
  </div>
  <table class="calendar-table" id="calendarTable">
    <thead>
      <tr><th>Datum</th><th>Fajr</th><th>Dhuhr</th><th>Asr</th><th>Maghrib</th><th>Isha</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="calendar-legend">Zeiten im 12-Stunden-Format (keine Zeitzone angezeigt)</div>
</div>

<footer>
  <div class="powered">Powered by AlAdhan API</div>
  <div class="meta" id="meta">Method: Muslim World League • School: Hanafi</div>
</footer>
</div>

<script>
// same script as before, just change buildRow function to reflect 3 columns
const ADDRESS = "Gosheim, Germany";
const METHOD = "3";
const SCHOOL = "1";
const el = {
  tableBody: document.getElementById("tableBody"),
  gregorian: document.getElementById("gregorian"),
  hijri: document.getElementById("hijri"),
  nextName: document.getElementById("nextName"),
  countdown: document.getElementById("countdown"),
  dateInput: document.getElementById("dateInput"),
  ramadanCountdown: document.getElementById("ramadanCountdown"),
  ramadanDate: document.getElementById("ramadanDate"),
  meta: document.getElementById("meta"),
  error: document.getElementById("error"),
  toggleBtn: document.getElementById("toggleCalendar"),
  calContainer: document.getElementById("calendarContainer"),
  calBody: document.querySelector("#calendarTable tbody"),
  monthSelect: document.getElementById("monthSelect"),
  yearSelect: document.getElementById("yearSelect"),
  loadBtn: document.getElementById("loadCalendar"),
  prevDay: document.getElementById("prevDay"),
  nextDay: document.getElementById("nextDay"),
  toggleCalendar: document.getElementById("toggleCalendar")
};

const PRAYER_ORDER = ["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];
const PRAYERS_FOR_STATUS = ["Fajr","Dhuhr","Asr","Maghrib","Isha"];
const MONTHS_DE = ["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"];

function pad(n){ return String(n).padStart(2,"0"); }
function stripTZ(s){ return !s?"—":s.split(" ")[0]; }
function toAmPm(t){ if(!t||t==="—") return "—"; const [h,m]=t.split(":").map(Number); const hh=(h%12)||12; return hh+":"+pad(m)+(h>=12?" PM":" AM"); }
function parseTime(baseDate,timeStr){ const [h,m]=timeStr.split(":").map(Number); const d=new Date(baseDate); d.setHours(h,m,0,0); return d; }
function hms(ms){ if(ms<0) ms=0; const s=Math.floor(ms/1000), h=Math.floor(s/3600), m=Math.floor((s%3600)/60), sec=s%60; return pad(h)+":"+pad(m)+":"+pad(sec); }
function formatDateGermanLong(d){ try{ return d.toLocaleDateString('de-DE',{weekday:'long',day:'numeric',month:'long',year:'numeric'}); }catch(e){ return d.toLocaleDateString('de-DE'); } }
function formatDateGermanShort(d){ return pad(d.getDate())+"."+pad(d.getMonth()+1)+"."+d.getFullYear(); }

function buildRow(name,time24,isCurrent,isNext){
  const tr=document.createElement("tr");
  tr.className="row"+(isCurrent?" current":"")+(isNext?" next":"");
  const td1=document.createElement("td");
  td1.textContent=name;
  const td2=document.createElement("td");
  td2.className="status";
  td2.textContent=isCurrent?"Current":isNext?"Next":"";
  const td3=document.createElement("td");
  td3.textContent=toAmPm(time24);
  tr.append(td1,td2,td3);
  return tr;
}

// The rest of your existing script for loading daily/monthly data and Ramadan countdown remains unchanged
</script>
</body>
</html>
