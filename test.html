<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prayer & Ramadan Dashboard – OLED</title>

<style>
    body {
        margin: 0;
        background: #000;
        color: #fff;
        font-family: "Segoe UI", sans-serif;
    }

    .container {
        width: 95%;
        max-width: 900px;
        margin: 25px auto;
    }

    .nav {
        display: flex;
        gap: 14px;
        margin-bottom: 20px;
    }

    .nav button {
        background: #0f0f0f;
        color: #fff;
        border: 1px solid #222;
        padding: 10px 14px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.95rem;
    }

    .nav button:hover {
        background: #161616;
    }

    .card {
        background: #0a0a0a;
        border: 1px solid #111;
        border-radius: 12px;
        padding: 18px 20px;
        margin-bottom: 20px;
    }

    .title {
        font-size: 1.15rem;
        margin-bottom: 10px;
        color: #b7b7b7;
    }

    /* TABLE */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 12px;
    }

    th, td {
        padding: 10px 6px;
        border-bottom: 1px solid #111;
        font-size: 0.95rem;
    }

    th {
        color: #808080;
        font-weight: 600;
        text-align: left;
    }

    /* Calendar Grid */
    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 6px;
        margin-top: 15px;
        text-align: center;
    }

    .day-name {
        color: #888;
        font-size: 0.85rem;
    }

    .day {
        padding: 10px 0;
        background: #111;
        border-radius: 6px;
        font-size: 0.92rem;
    }

    .today {
        background: #0044aa;
    }

    /* Dropdowns */
    select {
        background: #0a0a0a;
        color: #fff;
        border: 1px solid #222;
        padding: 7px;
        border-radius: 6px;
        margin-right: 8px;
    }

    /* Ramadan labels */
    .iftar {
        color: #58d68d;
        font-weight: 600;
    }
    .sehri {
        color: #ff7675;
        font-weight: 600;
    }
</style>
</head>

<body>
<div class="container">

    <!-- NAV -->
    <div class="nav">
        <button onclick="showSection('today')">Heute</button>
        <button onclick="showSection('ramadan')">Ramadan</button>
        <button onclick="showSection('calendar')">Monatskalender</button>
    </div>

    <!-- TODAY SECTION -->
    <div id="today" class="card">
        <div class="title">Gebetszeiten Heute</div>
        <table id="todayTable"></table>
    </div>

    <!-- RAMADAN SECTION -->
    <div id="ramadan" class="card" style="display:none;">
        <div class="title">Ramadan Zeiten</div>

        <div id="ramadanInfo"></div>

        <table id="ramadanTable"></table>
    </div>

    <!-- MONTHLY CALENDAR SECTION -->
    <div id="calendar" class="card" style="display:none;">
        <div class="title">Monatskalender</div>

        <select id="monthSelect"></select>
        <select id="yearSelect"></select>

        <div class="calendar-grid" id="calendarGrid"></div>

        <table id="calendarTable"></table>
    </div>

</div>


<script>
// ======= SAMPLE FIXED TIMES FOR DEMO =======
const prayerTimes = {
    fajr: "06:21", dhuhr: "12:34", asr: "14:45",
    maghrib: "16:35", isha: "18:10"
};

// For Ramadan example:
const ramadanStart = new Date("2025-03-01");
const ramadanEnd   = new Date("2025-03-30");


function formatTime(t) { return t; } // CET removed.


/* ================= SHOW/HIDE SECTIONS ================= */
function showSection(id) {
    document.getElementById("today").style.display = "none";
    document.getElementById("ramadan").style.display = "none";
    document.getElementById("calendar").style.display = "none";
    document.getElementById(id).style.display = "block";

    if (id === "calendar") loadCalendar(new Date());
}


/* ================= TODAY TABLE ================= */
function loadToday() {
    const table = document.getElementById("todayTable");
    table.innerHTML = `
        <tr><th>Gebet</th><th>Zeit</th></tr>
        <tr><td>Fajr</td><td>${formatTime(prayerTimes.fajr)}</td></tr>
        <tr><td>Dhuhr</td><td>${formatTime(prayerTimes.dhuhr)}</td></tr>
        <tr><td>Asr</td><td>${formatTime(prayerTimes.asr)}</td></tr>
        <tr><td>Maghrib</td><td>${formatTime(prayerTimes.maghrib)}</td></tr>
        <tr><td>Isha</td><td>${formatTime(prayerTimes.isha)}</td></tr>
    `;
}


/* ================= RAMADAN WIDGET (FIXED) ================= */
function loadRamadan() {
    const today = new Date();
    const infoBox = document.getElementById("ramadanInfo");
    const table = document.getElementById("ramadanTable");

    if (today < ramadanStart || today > ramadanEnd) {
        infoBox.innerHTML = "Heute ist kein Ramadan.";
        table.innerHTML = "";
        return;
    }

    const dayNum = Math.floor((today - ramadanStart) / (1000*60*60*24)) + 1;

    const sehri = "06:10";
    const iftar = "16:35";

    infoBox.innerHTML = `
        Ramadan Tag: <b>${dayNum}</b><br>
        Sehri endet um: <span class="sehri">${sehri}</span><br>
        Iftar ist um: <span class="iftar">${iftar}</span><br><br>
    `;

    table.innerHTML = `
        <tr><th>Art</th><th>Zeit</th></tr>
        <tr><td>Sehri</td><td>${sehri}</td></tr>
        <tr><td>Iftar</td><td>${iftar}</td></tr>
    `;
}


/* ================= MONTH SELECT OPTIONS ================= */
function setupDropdowns() {
    const monthNames = ["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"];

    const monthSelect = document.getElementById("monthSelect");
    const yearSelect  = document.getElementById("yearSelect");

    monthNames.forEach((m,i)=>{
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = m;
        monthSelect.appendChild(opt);
    });

    for (let y=2025; y<=2030; y++){
        const opt = document.createElement("option");
        opt.value = y;
        opt.textContent = y;
        yearSelect.appendChild(opt);
    }

    // Load current month/year
    const now = new Date();
    monthSelect.value = now.getMonth();
    yearSelect.value  = now.getFullYear();

    monthSelect.onchange = ()=>loadCalendar();
    yearSelect.onchange  = ()=>loadCalendar();
}


/* ================= CALENDAR RENDER ================= */
function loadCalendar(dateOverride=null) {
    const month = dateOverride ? dateOverride.getMonth() : parseInt(monthSelect.value);
    const year  = dateOverride ? dateOverride.getFullYear() : parseInt(yearSelect.value);

    const firstDay = new Date(year, month, 1);
    const lastDay  = new Date(year, month+1, 0);
    const grid = document.getElementById("calendarGrid");

    grid.innerHTML = "";

    const weekdays = ["Mo","Di","Mi","Do","Fr","Sa","So"];
    weekdays.forEach(d=>{
        const div = document.createElement("div");
        div.className = "day-name";
        div.textContent = d;
        grid.appendChild(div);
    });

    let startOffset = (firstDay.getDay()+6)%7;

    for (let i=0; i<startOffset; i++){
        const empty = document.createElement("div");
        grid.appendChild(empty);
    }

    const today = new Date();

    for (let d=1; d<=lastDay.getDate(); d++){
        const div = document.createElement("div");
        div.className = "day";
        div.textContent = d;

        if (d===today.getDate() && month===today.getMonth() && year===today.getFullYear())
            div.classList.add("today");

        grid.appendChild(div);
    }
}


/* INIT */
loadToday();
setupDropdowns();
</script>

</body>
</html>
